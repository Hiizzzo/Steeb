/* Protección de Componentes Críticos - Tema Shiny */

/* Proteger completamente el menú flotante (sin afectar el borde del círculo) */
.shiny .floating-buttons-container,
.shiny [class*="floating"]:not(.floating-border),
.shiny [class*="FloatingButtons"]:not(.floating-border),
.shiny .absolute.-top-\[140px\],
.shiny .absolute.-top-\[140px\] *,
.shiny [class*="w-40"][class*="h-40"]:not(.floating-border),
.shiny [class*="sm:w-56"][class*="sm:h-56"]:not(.floating-border) {
  background: inherit !important;
  /* border: inherit !important; */
  box-shadow: inherit !important;
  animation: none !important;
  /* transform: none !important; - REMOVED to allow icon positioning */
}

/* Asegurar el borde del círculo del menú radial en Shiny */
.shiny .floating-border.bg-black { border-color: #ffffff !important; border-width: 2px !important; border-style: solid !important; }
.shiny .floating-border.bg-white { border-color: #000000 !important; border-width: 2px !important; border-style: solid !important; }

/* Proteger botones del menú flotante (sin borde en los íconos) */
.shiny .floating-buttons-container button,
.shiny [class*="floating"] button,
.shiny [class*="FloatingButtons"] button,
.shiny .absolute.-top-\[140px\] button {
  background: inherit !important;
  border: none !important; /* quitar cualquier borde en los botones de íconos */
  box-shadow: inherit !important;
  animation: none !important;
  /* transform: none !important; - REMOVED to allow icon positioning */
  color: inherit !important;
  filter: none !important;
}

/* Proteger iconos del menú flotante (sin borde ni outline extra) */
.shiny .floating-buttons-container svg,
.shiny [class*="floating"] svg,
.shiny [class*="FloatingButtons"] svg,
.shiny .absolute.-top-\[140px\] svg {
  filter: none !important;
  animation: none !important;
  color: inherit !important;
  stroke: currentColor !important; /* usar solo el stroke propio de lucide */
  outline: none !important;
}

/* Proteger las líneas divisorias del menú */
.shiny .absolute.-top-\[140px\] .bg-black {
  background: inherit !important;
  border: inherit !important;
  animation: none !important;
}

/* Proteger el menú expandido */
.shiny .showCalendarMenu,
.shiny .showCalendarMenu * {
  background: inherit !important;
  border: inherit !important;
  box-shadow: inherit !important;
  animation: none !important;
  /* transform: none !important;  REMOVED to allow polar positioning */
}

/* Permitir estilos personalizados para el FAB en modo shiny */
.shiny .shiny-fab {
  background: white !important;
}

.shiny .shiny-fab svg {
  color: black !important;
  fill: black !important;
}

/* Estilos básicos para el FAB - sin dependencias circulares */

/* Proteger el modal de creación de tareas */
.shiny .modal-add-task,
.shiny .modal-add-task * {
  background: var(--shiny-card-bg) !important;
  border: 1px solid #000000 !important;
  color: var(--shiny-text) !important;
}

/* Force inner controls borders to white inside task creation card */
.shiny .shiny-task-card .border-black,
.shiny .shiny-task-card .border-gray-600,
.shiny .shiny-task-card .border-gray-500,
.shiny .shiny-task-card .border-black\/15,
.shiny .shiny-task-card .border-white\/30,
.shiny .shiny-task-card .border { /* generic border utility */
  border-color: #ffffff !important;
}

/* Proteger las tarjetas de tareas */
.shiny .task-card,
.shiny .bg-white.border.border-gray-200.rounded-lg {
  background: var(--shiny-card-bg) !important;
  border: 1px solid #000000 !important;
  color: var(--shiny-text) !important;
  box-shadow: none !important;
}

/* Proteger los checkboxes de tareas */

/* Proteger el icono del checkbox completado */
.shiny [class*="w-4"][class*="h-4"][class*="text-white"],
.shiny [class*="w-4"][class*="h-4"][class*="dark:text-black"] {
  color: white !important;
  filter: none !important;
  animation: none !important;
}

/* Proteger el hover del checkbox */
.shiny button:hover .w-6.h-6.rounded-full.border-2 {
  border-color: var(--shiny-accent) !important;
  transform: scale(1.05) !important;
}

/* Proteger específicamente el botón del checkbox */
.shiny .task-checkbox-button {
  /* NO SOBRESCRIBIR background y border para que funcionen los estilos de completado */
  box-shadow: none !important;
  animation: none !important;
  transform: none !important;
  z-index: 10 !important;
  position: relative !important;
  pointer-events: auto !important;
}

.shiny .task-checkbox-button:hover {
  background: rgba(255, 107, 157, 0.1) !important;
  transform: none !important;
}

.shiny .task-checkbox-button:focus {
  outline: 2px solid #000000 !important;
  outline-offset: 2px !important;
}

/* Asegurar que el checkbox siempre sea clickeable */
.task-checkbox-button {
  z-index: 10 !important;
  position: relative !important;
  pointer-events: auto !important;
}

/* Proteger el header y navegación */
/* Proteger textos principales */
.shiny h1:not(.tareas-multicolor):not(.steeb-main-title),
.shiny h2,
.shiny h3 {
  color: var(--shiny-text) !important;
  background: none !important;
  -webkit-background-clip: unset !important;
  -webkit-text-fill-color: unset !important;
  animation: none !important;
}

/* Proteger el contenido principal */
.shiny .min-h-screen {
  background: var(--shiny-bg) !important;
  color: var(--shiny-text) !important;
}

/* Proteger el botón de configuración */
/* Proteger los toggles de configuración */
.shiny .w-12.h-6.rounded-full {
  background: var(--shiny-card-bg) !important;
  border: 1px solid var(--shiny-purple) !important;
}

.shiny .w-4.h-4.rounded-full:not(.simple-task-checkbox) {
  background: var(--shiny-pink) !important;
  border: none !important;
}

/* Shiny: borde arcoíris animado alrededor del diálogo de STEEB */
.shiny .shiny-steeb-dialog {
  position: relative;
  border: none !important; /* oculto el borde gris para mostrar solo el anillo */
}
.shiny .shiny-steeb-dialog::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit; /* igual que el calendario (hereda el radio real del contenedor) */
  padding: 3px; /* mismo grosor que el calendario */
  background: conic-gradient(
    from 0deg,
    #ff004c 0%, #ff7a00 14.2857%,
    #ffe600 28.5714%, #00ff66 42.8571%,
    #00c2ff 57.1428%, #8b00ff 71.4285%,
    #ff00ff 85.7142%, #ff004c 100%
  );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
          mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude; /* solo borde */
  /* sin animación para igualar el calendario */
  pointer-events: none;
  z-index: 1;
}

/* Sombra interna muy sutil para separar el anillo del contenido */
.shiny .shiny-steeb-dialog::after {
  content: "";
  position: absolute;
  inset: 1px;
  border-radius: calc(1rem - 1px);
  box-shadow: inset 0 0 8px rgba(255,255,255,0.06);
  pointer-events: none;
}
